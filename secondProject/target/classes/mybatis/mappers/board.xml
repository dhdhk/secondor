<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	

<mapper namespace="mapper.board">

 	<resultMap type="boardDTO" id="articleResult">
      <result property="seller_id" column="seller_id" />
      <result property="pr_title" column="pr_title" />
      <result property="pr_price" column="pr_price" />
      <result property="pr_img1" column="pr_img1" />
      <result property="pr_img2" column="pr_img2" />
      <result property="pr_img3" column="pr_img3" />
      <result property="pr_content" column="pr_content" />
      <result property="pr_condition" column="pr_condition" />
      <result property="pr_sold" column="pr_sold" />
      <result property="regDate" column="regDate" />
      <result property="regNum" column="regNum" />
      <result property="category_name" column="category_name" />
   </resultMap>
   

   	<resultMap type="imageDTO" id="imageResult">

		<result property="imageFileNo" column="imageFileNo" />
		<result property="imageFileName" column="imagefileName" />
		<result property="regDate" column="regDate" />
		<result property="articleNo" column="articleNo" />
	</resultMap>

   
   
   <select id="selectAllArticleList" resultMap="articleResult">
      <![CDATA[
         select * from board order by regDate desc
      ]]>
   </select>
   
 	<!-- 전체 리스트 메인 페이징  -->
 	<select id="selectPage" parameterType="java.util.Map" resultMap="articleResult">
       <![CDATA[  
         select * from board_view where num between  #{start} and #{end}
      ]]>
   </select>
   
     <select id="count" resultType="int">
        <![CDATA[
          SELECT count(*) FROM board
         ]]>
    </select>
    
    <!-- 검색  -->
    <select id="serchPage" parameterType="java.util.Map" resultMap="articleResult">
       <![CDATA[  
        select * from board_view where  pr_title like ('%',#{keyword},'%') and num #{start} and #{end}
      ]]>
   </select>

    <select id="serchcount" resultType="int">
        <![CDATA[
          SELECT count(*) FROM board where pr_title like ('%',#{keyword},'%') and num #{start} and #{end}
         ]]>
    </select>

	
	<select id="selectArticleByCategory" parameterType="String" resultMap="articleResult">
		<![CDATA[
			select * from board where category_name=#{category_name} order by regNum desc
		]]>
	</select>
	
	<select id="selectProduct" parameterType="int" resultType="boardDTO">
		<![CDATA[
			select * from board where regNum=#{regNum}
		]]>
	</select>
	

	<select id="selectImageFileList" parameterType="int" resultType="imageDTO">
    	<![CDATA[
    		select pr_img1,pr_img2,pr_img3 from board where regNum=#{regNum}
    	]]>
    </select>
	

	
	
	
	</mapper>